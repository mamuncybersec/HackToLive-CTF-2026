<?php session_start();
$challenges = [
    ['id'=>1,'title'=>'Basic SQL Injection','description'=>'Bypass login without password','encrypted'=>'SELECT * FROM users WHERE user=\'admin\' AND pass=\'x\'','answer'=>'admin\' --','hint'=>'Comment out the password check','difficulty'=>'Easy','points'=>35],
    ['id'=>2,'title'=>'Union Based SQLi','description'=>'Extract column count','encrypted'=>'SELECT id, name FROM products UNION SELECT 1,2','answer'=>'2','hint'=>'Match number of columns','difficulty'=>'Medium','points'=>50],
    ['id'=>3,'title'=>'Blind SQLi','description'=>'Extract data without output','encrypted'=>'if(substring(password,1,1)=\'a\') sleep(5);','answer'=>'time-based inference','hint'=>'Use response times to extract data','difficulty'=>'Hard','points'=>100]
];
$submitted=$_SERVER['REQUEST_METHOD']==='POST';
if($submitted)foreach($challenges as$c)if($c['id']===(int)$_POST['challenge_id']){$a=strtolower(trim($_POST['answer']));$result=['correct'=>strpos($a,strtolower($c['answer']))!==false,'challenge'=>$c];break;}
?><!DOCTYPE html><html><head><meta charset="UTF-8"><title>SQL Injection - CTF</title><style>*{margin:0;padding:0}body{font-family:monospace;background:linear-gradient(135deg,#0d1f3c,#2a5298);min-height:100vh;color:#333}header{background:#000;color:#fff;padding:30px;text-align:center;border-bottom:3px solid #0f0}h1{font-size:2.5em;text-shadow:0 0 20px #0f0}.container{max-width:1000px;margin:40px auto;padding:20px}.back{display:inline-block;margin-bottom:20px;padding:10px 20px;background:#0f0;color:#000;border-radius:4px;text-decoration:none;font-weight:bold}.c{background:#fff;border-radius:8px;padding:25px;margin-bottom:20px;box-shadow:0 4px 15px rgba(0,0,0,0.2);border:1px solid rgba(0,255,0,0.2)}.c h3{color:#1e3c72}.b{display:inline-block;padding:5px 12px;border-radius:4px;font-size:.85em;font-weight:bold}.pts{background:#6c5ce7;color:#fff;margin-left:10px}.d-easy{background:#90EE90}.d-med{background:#FFD700}.d-hard{background:#FF6B6B;color:#fff}.e{background:#1a1a1a;color:#0f0;padding:15px;margin:15px 0;border-left:3px solid #0f0;word-break:break-all}input{width:100%;padding:12px;border:2px solid #0f0;margin:10px 0;border-radius:4px;font-family:monospace}button{background:#0f0;color:#000;padding:12px 25px;border:0;border-radius:4px;cursor:pointer;font-weight:bold}.ok{background:#d4edda;color:#155724;padding:15px;margin-top:15px}.no{background:#f8d7da;color:#721c24;padding:15px;margin-top:15px}.h{background:#fff3cd;color:#856404;padding:12px;margin-top:12px;border-left:4px solid #ffc107}</style></head><body><header><h1>ðŸ’‰ SQL Injection</h1></header><div class="container"><a href="../index.html" class="back">&larr;</a><?php foreach($challenges as$c):?><div class="c"><h3><?=$c['title']?></h3><span class="b d-<?=strtolower(substr($c['difficulty'],0,3))?>"><?=$c['difficulty']?></span><span class="b pts">+<?=$c['points']?> pts</span><p><?=$c['description']?></p><div class="e"><?=$c['encrypted']?></div><?php if($submitted&&isset($result)&&$result['challenge']['id']===$c['id']):?><div class="<?=$result['correct']?'ok':'no'?>"><?=$result['correct']?'âœ… +â€‹'.$result['challenge']['points']:'âŒ'?></div><?php endif;?><form method="POST"><input type="text" name="answer" required><input type="hidden" name="challenge_id" value="<?=$c['id']?>"><button>Submit</button></form><div class="h">ðŸ’¡ <?=$c['hint']?></div></div><?php endforeach;?></div></body></html>